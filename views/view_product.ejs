<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/head.ejs'); %>
    <!-- FIXME: -->
    <!-- QUITAR LA REFERENCIA A ESTE ARCHIVO YA QUE NO APLICA NADA -->
    <!-- <link rel="stylesheet" href="assets/css/styles_shop.css" /> -->
    <link rel="stylesheet" href="/assets/css/styles_view_product.css" />
</head>

<body>
  <!--  ------------------ PROMO ------------------ -->
  <div class="promo">
    <span>
      <a href="mailto:contactvitahealthc@gmail.com">
        <i class="fas fa-envelope"></i> contactvitahealthc@gmail.com
      </a></span>
    <span>ESTA ES LA VISTA DE LOS SERUMS</span>
    <span>
      <ul class="media_social">
        <li>
          <a href="#"><i class="fab fa-facebook-square"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
        </li>
      </ul>
    </span>
  </div>

  <!-- ------------------ HEADER ------------------------ -->
  <div class="header">
    <%- include('partials/header.ejs', {account: user?.name ?? "" , car }); %>
  </div>
  <!-- ------------------ End Header ------------------------ -->

  <!-- ----------------- SINGLE PRODUCT DETAILS ------------- -->

  <section class="section">
    <div class="section__col-1">
      <img src="<%= image.image %>" class="prueba_img" id="ProductImg" />

      <div class="section__col-1__img">
        <% for( const productImage of product.images ){ %>
          <div class="section__col-1__img_small">
            <img src="<%= productImage.image ?? "" %>" class="small-img" />
          </div>
          <% } %>
      </div>
    </div>
    <div class="section__col-2">
      <div class="section__col-2__content">
        <h2> <strong>Product:</strong> <span>
            <%= product.name %>
          </span> </h2>
        <p> <strong>Size:</strong> <%= product.size %></p>
        <p class="section__col-2-price"> <strong>Price: </strong> $<%= product.price %>
        </p>

        <div class="section__col-2 section__col-2--flex">
          <form action="/shopping_cart/add" method="post">
            <input type="number" value="1" / name="quantity">
            <input type="hidden" name="product_id" value="<%= product.id %>" />
            <button type="submit" class="section__col-2-btn">Add to card</button>
          </form>
        </div>
        <img class="section__col-2__iconos" src="/img/iconos_web.png" alt="" />
        <!-- <p> -->
          <!-- <%= product.description %> -->
        <!-- </p> -->

        <div class="benefits__container">
          <h3 class="benefits__header">
            <strong>Key Benefits:</strong>
          </h3>
          <ul class="key__benefits">
            <% if (product.keyBenefits) { %>
              <% for (const keyBenefit of product.keyBenefits.split('\n')) { %>
                <li><%= keyBenefit %></li>
              <% } %>
            <% } %>
          </ul>

          <h3 class="howToUse__header">
            <strong>How to use:</strong>
          </h3>
          <p class="howToUse__content"><%= product.howUse %></p>

          <h3 class="benefits__header">
            <strong>Full Ingredient List:</strong>
          </h3>
          <p class="howToUse__content"><%= product.ingredients %></p>

          <h3 class="benefits__header">
            <strong>Caution:</strong>
          </h3>
          <p class="howToUse__content"><%= product.caution %></p>
        </div>
      </div>
    </div>
  </section>
  <div class="related-product">
    <h2>Related product</h2>
    <div class="products">
      <ul>
        <% for (const productR of relatedProducts){ %>
          <li>
            <a href="#"> <img src="<%= productR.image.image %>" alt="no image" /> </a>
            <p>
              <%= productR.name %>
            </p>
            <p>
              <%= productR.price %>
            </p>
            <div class="rating">
              <i class="bx bxs-star"></i>
              <i class="bx bxs-star"></i>
              <i class="bx bxs-star"></i>
            </div>
          </li>
          <% } %>

      </ul>
    </div>
  </div>

  <!-- ------------------------  Footer ------------------------  -->
  <%- include('partials/skincare-footer.ejs'); %>
  
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- TODO: TRABAJAR EN EL JS -->
  <script>
    var ProductImg = document.getElementById('ProductImg');

    var SmallImg = document.getElementsByClassName('small-img');

    SmallImg[0].onclick = function () {
      ProductImg.src = SmallImg[0].src;
      console.log(ProductImg);
    };

    SmallImg[1].onclick = function () {
      ProductImg.src = SmallImg[1].src;
    };

    SmallImg[2].onclick = function () {
      ProductImg.src = SmallImg[2].src;
    };
  </script>
  <script>
    let tabPanes = document
      .getElementsByClassName('tab-header')[0]
      .getElementsByTagName('div');

    for (let i = 0; i < tabPanes.length; i++) {
      tabPanes[i].addEventListener('click', function () {
        document
          .getElementsByClassName('tab-header')[0]
          .getElementsByClassName('active')[0]
          .classList.remove('active');
        tabPanes[i].classList.add('active');

        document
          .getElementsByClassName('tab-content')[0]
          .getElementsByClassName('active')[0]
          .classList.remove('active');
        document
          .getElementsByClassName('tab-content')[0]
          .getElementsByTagName('div')
        [i].classList.add('active');
      });
    }
  </script>
  <%- include('partials/script.ejs'); %>
  <script src="/assets/js/index.js"></script>
</body>

</html>